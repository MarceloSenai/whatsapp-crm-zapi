@{
    var isOutbound = Direction == "outbound";
}

<div class="@(isOutbound ? "flex justify-end" : "flex justify-start") mb-1">
    <div class="@($"max-w-[70%] px-3 py-2 shadow-sm {(isOutbound ? "bg-[#dcf8c6] rounded-tl-lg rounded-tr-lg rounded-bl-lg" : "bg-white rounded-tl-lg rounded-tr-lg rounded-br-lg")}")">
        <p class="text-sm text-gray-900 whitespace-pre-wrap break-words">@Content</p>
        <div class="flex items-center justify-end gap-1 mt-1">
            <span class="text-[10px] text-gray-500">@CreatedAt.ToLocalTime().ToString("HH:mm")</span>
            @if (isOutbound)
            {
                @if (Status == "read")
                {
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#53bdeb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 7 17l-5-5"/><path d="m22 10-9.5 9.5L10 17"/></svg>
                }
                else if (Status == "delivered")
                {
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 7 17l-5-5"/><path d="m22 10-9.5 9.5L10 17"/></svg>
                }
                else
                {
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                }
            }
        </div>
    </div>
</div>

@code {
    [Parameter] public string Direction { get; set; } = "outbound";
    [Parameter] public string Content { get; set; } = "";
    [Parameter] public string Status { get; set; } = "sent";
    [Parameter] public DateTime CreatedAt { get; set; }
}
